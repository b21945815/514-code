{"query": "How many accounts who choose issuance after transaction are staying in East Bohemia region?", "ground_truth_sql": "SELECT COUNT(T2.account_id) FROM district AS T1 INNER JOIN account AS T2 ON T1.district_id = T2.district_id WHERE T1.A3 = 'east Bohemia' AND T2.frequency = 'POPLATEK PO OBRATU'", "status": "completed", "steps": {"router": {"status": "success", "intent": "DATABASE QUERY", "confidence": 0.9955606460571289}, "decomposer": {"status": "success", "tokens": 4014, "json_plan": {"tasks": [{"task_id": 1, "is_achievable": true, "error": null, "main_table": "account as a", "is_distinct": false, "structural_logic": [{"type": "INNER JOIN", "table": "district as d", "condition": {"left": {"type": "COLUMN", "value": "a.district_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "d.district_id"}}}], "where_clause": {"logic": "AND", "conditions": [{"left": {"type": "COLUMN", "value": "a.frequency"}, "operator": "=", "right": {"type": "SEMANTIC", "value": "issuance after transaction", "table": "account", "column": "frequency"}}, {"left": {"type": "COLUMN", "value": "d.A3"}, "operator": "=", "right": {"type": "SEMANTIC", "value": "East Bohemia", "table": "district", "column": "A3"}}]}, "target": [{"value": {"type": "FUNCTION", "name": "COUNT", "params": [{"type": "COLUMN", "value": "a.account_id"}]}, "alias": "account_count"}]}]}}, "compiler": {"status": "success", "generated_sql": "SELECT COUNT(a.account_id) AS account_count\nFROM \"account\" as a\nINNER JOIN \"district\" as d ON (a.district_id = d.district_id)\nWHERE ((a.frequency = 'POPLATEK PO OBRATU') AND (d.A3 = 'east Bohemia'))"}, "evaluator": {"status": "success", "match_type": "EXACT_MATCH", "details": null, "execution_status": "SUCCESS"}}, "metrics": {"total_time": 8.50278639793396, "total_tokens": 4014}}
{"query": "How many accounts who have region in Prague are eligible for loans?", "ground_truth_sql": "SELECT COUNT(T1.account_id) FROM account AS T1 INNER JOIN loan AS T2 ON T1.account_id = T2.account_id INNER JOIN district AS T3 ON T1.district_id = T3.district_id WHERE T3.A3 = 'Prague'", "status": "completed", "steps": {"router": {"status": "success", "intent": "DATABASE QUERY", "confidence": 0.99565190076828}, "decomposer": {"status": "success", "tokens": 3868, "json_plan": {"tasks": [{"task_id": 1, "is_achievable": true, "error": null, "limit_by": null, "main_table": "account as a", "is_distinct": false, "structural_logic": [{"type": "INNER JOIN", "table": "district as d", "condition": {"left": {"type": "COLUMN", "value": "a.district_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "d.district_id"}}}, {"type": "INNER JOIN", "table": "disp as disp", "condition": {"left": {"type": "COLUMN", "value": "a.account_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "disp.account_id"}}}], "where_clause": {"logic": "AND", "conditions": [{"left": {"type": "COLUMN", "value": "d.A3"}, "operator": "=", "right": {"type": "SEMANTIC", "value": "Prague", "table": "district", "column": "A3"}}, {"left": {"type": "COLUMN", "value": "disp.type"}, "operator": "=", "right": {"type": "SEMANTIC", "value": "OWNER", "table": "disp", "column": "type"}}]}, "target": [{"value": {"type": "FUNCTION", "name": "COUNT", "params": [{"type": "COLUMN", "value": "a.account_id"}]}, "alias": "account_count"}], "group_by": [], "having_clause": null, "order_by": null}]}}, "compiler": {"status": "success", "generated_sql": "SELECT COUNT(a.account_id) AS account_count\nFROM \"account\" as a\nINNER JOIN \"district\" as d ON (a.district_id = d.district_id)\nINNER JOIN \"disp\" as disp ON (a.account_id = disp.account_id)\nWHERE ((d.A3 = 'Prague') AND (disp.type = 'OWNER'))"}, "evaluator": {"status": "success", "match_type": "WRONG", "details": "Row ['84'] (as set) not found in prediction rows (subset check).", "execution_status": "SUCCESS"}}, "metrics": {"total_time": 2.4501194953918457, "total_tokens": 3868}}
{"query": "The average unemployment ratio of 1995 and 1996, which one has higher percentage?", "ground_truth_sql": "SELECT DISTINCT IIF(AVG(A13) > AVG(A12), '1996', '1995') FROM district", "status": "completed", "steps": {"router": {"status": "success", "intent": "DATABASE QUERY", "confidence": 0.994712769985199}, "decomposer": {"status": "success", "tokens": 3614, "json_plan": {"tasks": [{"task_id": 1, "is_achievable": true, "error": null, "limit_by": null, "main_table": "district", "is_distinct": false, "structural_logic": [], "where_clause": null, "target": [{"value": {"type": "FUNCTION", "name": "AVG", "params": [{"type": "COLUMN", "value": "district.A12"}]}, "alias": "avg_1995"}, {"value": {"type": "FUNCTION", "name": "AVG", "params": [{"type": "COLUMN", "value": "district.A13"}]}, "alias": "avg_1996"}, {"value": {"type": "CASE", "cases": [{"when": {"type": "CONDITION", "value": {"left": {"type": "FUNCTION", "name": "AVG", "params": [{"type": "COLUMN", "value": "district.A12"}]}, "operator": ">", "right": {"type": "FUNCTION", "name": "AVG", "params": [{"type": "COLUMN", "value": "district.A13"}]}}}, "then": {"type": "LITERAL", "value": "1995"}}], "else": {"type": "LITERAL", "value": "1996"}}, "alias": "higher_year"}], "group_by": [], "having_clause": null, "order_by": []}]}}, "compiler": {"status": "success", "generated_sql": "SELECT AVG(district.A12) AS avg_1995, AVG(district.A13) AS avg_1996, CASE WHEN (AVG(district.A12) > AVG(district.A13)) THEN '1995' ELSE '1996' END AS higher_year\nFROM \"district\""}, "evaluator": {"status": "success", "match_type": "SUPER_SOFT_MATCH", "details": "Logic Correct (Smart Map): Extra Columns", "execution_status": "SUCCESS"}}, "metrics": {"total_time": 1.9963500499725342, "total_tokens": 3614}}
{"query": "List out the no. of districts that have female average salary is more than 6000 but less than 10000?", "ground_truth_sql": "SELECT COUNT(DISTINCT T2.district_id)  FROM client AS T1 INNER JOIN district AS T2 ON T1.district_id = T2.district_id WHERE T1.gender = 'F' AND T2.A11 BETWEEN 6000 AND 10000", "status": "decomposer_failure", "steps": {"router": {"status": "success", "intent": "DATABASE QUERY", "confidence": 0.9952785968780518}, "decomposer": {"status": "unachievable", "tokens": 3412, "json_plan": {"tasks": [{"task_id": 1, "is_achievable": false, "error": "Cannot compute female average salary because the schema lacks a relationship between gender and district salary data.", "limit_by": null, "main_table": null, "is_distinct": false, "structural_logic": [], "where_clause": null, "target": [], "group_by": [], "having_clause": null, "order_by": []}]}, "error": "Cannot compute female average salary because the schema lacks a relationship between gender and district salary data."}}, "metrics": {"total_time": 1.2489871978759766, "total_tokens": 3412}}
{"query": "How many male customers who are living in North Bohemia have average salary greater than 8000?", "ground_truth_sql": "SELECT COUNT(T1.client_id) FROM client AS T1 INNER JOIN district AS T2 ON T1.district_id = T2.district_id WHERE T1.gender = 'M' AND T2.A3 = 'north Bohemia' AND T2.A11 > 8000", "status": "completed", "steps": {"router": {"status": "success", "intent": "DATABASE QUERY", "confidence": 0.9954082369804382}, "decomposer": {"status": "success", "tokens": 3639, "json_plan": {"tasks": [{"task_id": 1, "is_achievable": true, "error": null, "limit_by": null, "main_table": "client as c", "is_distinct": false, "structural_logic": [{"type": "INNER JOIN", "table": "district as d", "condition": {"left": {"type": "COLUMN", "value": "c.district_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "d.district_id"}}}], "where_clause": {"logic": "AND", "conditions": [{"left": {"type": "COLUMN", "value": "c.gender"}, "operator": "=", "right": {"type": "LITERAL", "value": "M"}}, {"left": {"type": "COLUMN", "value": "d.A3"}, "operator": "=", "right": {"type": "SEMANTIC", "value": "North Bohemia", "table": "district", "column": "A3"}}, {"left": {"type": "COLUMN", "value": "d.A11"}, "operator": ">", "right": {"type": "LITERAL", "value": 8000}}]}, "target": [{"value": {"type": "FUNCTION", "name": "COUNT", "params": [{"type": "COLUMN", "value": "c.client_id"}]}, "alias": "male_count"}], "group_by": [], "having_clause": null, "order_by": []}]}}, "compiler": {"status": "success", "generated_sql": "SELECT COUNT(c.client_id) AS male_count\nFROM \"client\" as c\nINNER JOIN \"district\" as d ON (c.district_id = d.district_id)\nWHERE ((c.gender = 'M') AND (d.A3 = 'north Bohemia') AND (d.A11 > 8000))"}, "evaluator": {"status": "success", "match_type": "EXACT_MATCH", "details": null, "execution_status": "SUCCESS"}}, "metrics": {"total_time": 1.8293445110321045, "total_tokens": 3639}}
{"query": "List out the account numbers of female clients who are oldest and has lowest average salary, calculate the gap between this lowest average salary with the highest average salary?", "ground_truth_sql": "SELECT T1.account_id , ( SELECT MAX(A11) - MIN(A11) FROM district ) FROM account AS T1 INNER JOIN district AS T2 ON T1.district_id = T2.district_id INNER JOIN disp AS T3 ON T1.account_id = T3.account_id INNER JOIN client AS T4 ON T3.client_id = T4.client_id WHERE T2.district_id = ( SELECT district_id FROM client WHERE gender = 'F' ORDER BY birth_date ASC LIMIT 1 ) ORDER BY T2.A11 DESC LIMIT 1", "status": "completed", "steps": {"router": {"status": "success", "intent": "DATABASE QUERY", "confidence": 0.9957734942436218}, "decomposer": {"status": "success", "tokens": 6992, "json_plan": {"tasks": [{"task_id": 1, "is_achievable": true, "error": null, "limit_by": null, "main_table": "district as d", "is_distinct": false, "structural_logic": [], "where_clause": null, "target": [{"value": {"type": "CONDITION", "value": {"left": {"type": "FUNCTION", "name": "MAX", "params": [{"type": "COLUMN", "value": "d.A11"}]}, "operator": "-", "right": {"type": "FUNCTION", "name": "MIN", "params": [{"type": "COLUMN", "value": "d.A11"}]}}}, "alias": "salary_gap"}], "group_by": [], "having_clause": null, "order_by": []}, {"task_id": 2, "is_achievable": true, "error": null, "limit_by": null, "main_table": "district as d", "is_distinct": false, "structural_logic": [], "where_clause": null, "target": [{"value": {"type": "FUNCTION", "name": "MIN", "params": [{"type": "COLUMN", "value": "d.A11"}]}, "alias": "min_salary"}], "group_by": [], "having_clause": null, "order_by": []}, {"task_id": 3, "is_achievable": true, "error": null, "limit_by": null, "main_table": "client as c", "is_distinct": false, "structural_logic": [{"type": "INNER JOIN", "table": "district as dist", "condition": {"left": {"type": "COLUMN", "value": "c.district_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "dist.district_id"}}}], "where_clause": {"logic": "AND", "conditions": [{"left": {"type": "COLUMN", "value": "c.gender"}, "operator": "=", "right": {"type": "SEMANTIC", "value": "female", "table": "client", "column": "gender"}}, {"left": {"type": "COLUMN", "value": "dist.A11"}, "operator": "=", "right": {"type": "SUBQUERY", "target_task_id": "2"}}]}, "target": [{"value": {"type": "FUNCTION", "name": "MIN", "params": [{"type": "COLUMN", "value": "c.birth_date"}]}, "alias": "min_birth"}], "group_by": [], "having_clause": null, "order_by": []}, {"task_id": 4, "is_achievable": true, "error": null, "limit_by": null, "main_table": "account as a", "is_distinct": false, "structural_logic": [{"type": "INNER JOIN", "table": "disp as dp", "condition": {"left": {"type": "COLUMN", "value": "a.account_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "dp.account_id"}}}, {"type": "INNER JOIN", "table": "client as c", "condition": {"left": {"type": "COLUMN", "value": "dp.client_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "c.client_id"}}}, {"type": "INNER JOIN", "table": "district as dist", "condition": {"left": {"type": "COLUMN", "value": "c.district_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "dist.district_id"}}}], "where_clause": {"logic": "AND", "conditions": [{"left": {"type": "COLUMN", "value": "c.gender"}, "operator": "=", "right": {"type": "SEMANTIC", "value": "female", "table": "client", "column": "gender"}}, {"left": {"type": "COLUMN", "value": "c.birth_date"}, "operator": "=", "right": {"type": "SUBQUERY", "target_task_id": "3"}}, {"left": {"type": "COLUMN", "value": "dist.A11"}, "operator": "=", "right": {"type": "SUBQUERY", "target_task_id": "2"}}]}, "target": [{"value": {"type": "COLUMN", "value": "a.account_id"}, "alias": "account_id"}, {"value": {"type": "SUBQUERY", "target_task_id": "1"}, "alias": "salary_gap"}], "group_by": [], "having_clause": null, "order_by": []}]}}, "compiler": {"status": "success", "generated_sql": "SELECT a.account_id AS account_id, (SELECT (MAX(d.A11) - MIN(d.A11)) AS salary_gap\nFROM \"district\" as d) AS salary_gap\nFROM \"account\" as a\nINNER JOIN \"disp\" as dp ON (a.account_id = dp.account_id)\nINNER JOIN \"client\" as c ON (dp.client_id = c.client_id)\nINNER JOIN \"district\" as dist ON (c.district_id = dist.district_id)\nWHERE ((c.gender = 'F') AND (c.birth_date = (SELECT MIN(c.birth_date) AS min_birth\nFROM \"client\" as c\nINNER JOIN \"district\" as dist ON (c.district_id = dist.district_id)\nWHERE ((c.gender = 'F') AND (dist.A11 = (SELECT MIN(d.A11) AS min_salary\nFROM \"district\" as d))))) AND (dist.A11 = (SELECT MIN(d.A11) AS min_salary\nFROM \"district\" as d)))"}, "evaluator": {"status": "success", "match_type": "WRONG", "details": "Row ['6', '4431'] (as set) not found in prediction rows (subset check).", "execution_status": "SUCCESS"}}, "metrics": {"total_time": 9.04183053970337, "total_tokens": 6992}}
{"query": "List out the account numbers of clients who are youngest and have highest average salary?", "ground_truth_sql": "SELECT T1.account_id  FROM account AS T1 INNER JOIN disp AS T2 ON T1.account_id = T2.account_id INNER JOIN client AS T3 ON T2.client_id = T3.client_id INNER JOIN district AS T4 on T4.district_id = T1.district_id WHERE T2.client_id = ( SELECT client_id FROM client ORDER BY birth_date DESC LIMIT 1) GROUP BY T4.A11, T1.account_id", "status": "completed", "steps": {"router": {"status": "success", "intent": "DATABASE QUERY", "confidence": 0.9959356784820557}, "decomposer": {"status": "success", "tokens": 4678, "json_plan": {"tasks": [{"task_id": 2, "is_achievable": true, "error": null, "limit_by": null, "main_table": "client", "is_distinct": false, "structural_logic": [], "where_clause": null, "target": [{"value": {"type": "FUNCTION", "name": "MIN", "params": [{"type": "COLUMN", "value": "client.birth_date"}]}, "alias": "min_birth_date"}], "group_by": [], "having_clause": null, "order_by": []}, {"task_id": 3, "is_achievable": true, "error": null, "limit_by": null, "main_table": "district", "is_distinct": false, "structural_logic": [], "where_clause": null, "target": [{"value": {"type": "FUNCTION", "name": "MAX", "params": [{"type": "COLUMN", "value": "district.A11"}]}, "alias": "max_salary"}], "group_by": [], "having_clause": null, "order_by": []}, {"task_id": 1, "is_achievable": true, "error": null, "limit_by": null, "main_table": "client as c", "is_distinct": true, "structural_logic": [{"type": "INNER JOIN", "table": "disp as d", "condition": {"left": {"type": "COLUMN", "value": "c.client_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "d.client_id"}}}, {"type": "INNER JOIN", "table": "account as a", "condition": {"left": {"type": "COLUMN", "value": "d.account_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "a.account_id"}}}, {"type": "INNER JOIN", "table": "district as di", "condition": {"left": {"type": "COLUMN", "value": "c.district_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "di.district_id"}}}], "where_clause": {"logic": "AND", "conditions": [{"left": {"type": "COLUMN", "value": "c.birth_date"}, "operator": "=", "right": {"type": "SUBQUERY", "target_task_id": "2"}}, {"left": {"type": "COLUMN", "value": "di.A11"}, "operator": "=", "right": {"type": "SUBQUERY", "target_task_id": "3"}}, {"left": {"type": "COLUMN", "value": "d.type"}, "operator": "=", "right": {"type": "SEMANTIC", "value": "OWNER", "table": "disp", "column": "type"}}]}, "target": [{"value": {"type": "COLUMN", "value": "a.account_id"}, "alias": "account_id"}], "group_by": [], "having_clause": null, "order_by": []}]}}, "compiler": {"status": "success", "generated_sql": "SELECT DISTINCT a.account_id AS account_id\nFROM \"client\" as c\nINNER JOIN \"disp\" as d ON (c.client_id = d.client_id)\nINNER JOIN \"account\" as a ON (d.account_id = a.account_id)\nINNER JOIN \"district\" as di ON (c.district_id = di.district_id)\nWHERE ((c.birth_date = (SELECT MIN(client.birth_date) AS min_birth_date\nFROM \"client\")) AND (di.A11 = (SELECT MAX(district.A11) AS max_salary\nFROM \"district\")) AND (d.type = 'OWNER'))"}, "evaluator": {"status": "success", "match_type": "WRONG", "details": "Row Count Mismatch: Expected 1, Got 0", "execution_status": "SUCCESS"}}, "metrics": {"total_time": 4.047110557556152, "total_tokens": 4678}}
{"query": "How many customers who choose statement of weekly issuance are Owner?", "ground_truth_sql": "SELECT COUNT(T1.account_id) FROM account AS T1 INNER JOIN disp AS T2 ON T1.account_id = T2.account_id WHERE T2.type = 'OWNER' AND T1.frequency = 'POPLATEK TYDNE'", "status": "completed", "steps": {"router": {"status": "success", "intent": "DATABASE QUERY", "confidence": 0.9950473308563232}, "decomposer": {"status": "success", "tokens": 4220, "json_plan": {"tasks": [{"task_id": 1, "is_achievable": true, "error": null, "limit_by": null, "main_table": "client as c", "is_distinct": false, "structural_logic": [{"type": "INNER JOIN", "table": "disp as d", "condition": {"left": {"type": "COLUMN", "value": "c.client_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "d.client_id"}}}, {"type": "INNER JOIN", "table": "account as a", "condition": {"left": {"type": "COLUMN", "value": "d.account_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "a.account_id"}}}], "where_clause": {"logic": "AND", "conditions": [{"left": {"type": "COLUMN", "value": "a.frequency"}, "operator": "=", "right": {"type": "SEMANTIC", "value": "weekly issuance", "table": "account", "column": "frequency"}}, {"left": {"type": "COLUMN", "value": "d.type"}, "operator": "=", "right": {"type": "SEMANTIC", "value": "OWNER", "table": "disp", "column": "type"}}]}, "target": [{"value": {"type": "FUNCTION", "name": "COUNT", "params": [{"type": "COLUMN", "value": "c.client_id"}]}, "alias": "owner_weekly_customers"}], "group_by": [], "having_clause": null, "order_by": []}]}}, "compiler": {"status": "success", "generated_sql": "SELECT COUNT(c.client_id) AS owner_weekly_customers\nFROM \"client\" as c\nINNER JOIN \"disp\" as d ON (c.client_id = d.client_id)\nINNER JOIN \"account\" as a ON (d.account_id = a.account_id)\nWHERE ((a.frequency = 'POPLATEK TYDNE') AND (d.type = 'OWNER'))"}, "evaluator": {"status": "success", "match_type": "EXACT_MATCH", "details": null, "execution_status": "SUCCESS"}}, "metrics": {"total_time": 3.910694122314453, "total_tokens": 4220}}
{"query": "List out the id number of client who choose statement of issuance after transaction are Disponent?", "ground_truth_sql": "SELECT T2.client_id FROM account AS T1 INNER JOIN disp AS T2 ON T1.account_id = T2.account_id WHERE T1.frequency = 'POPLATEK PO OBRATU' AND T2.type = 'DISPONENT'", "status": "completed", "steps": {"router": {"status": "success", "intent": "DATABASE QUERY", "confidence": 0.9957043528556824}, "decomposer": {"status": "success", "tokens": 4097, "json_plan": {"tasks": [{"task_id": 1, "is_achievable": true, "error": null, "limit_by": null, "main_table": "client as c", "is_distinct": false, "structural_logic": [{"type": "INNER JOIN", "table": "disp as d", "condition": {"left": {"type": "COLUMN", "value": "c.client_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "d.client_id"}}}, {"type": "INNER JOIN", "table": "account as a", "condition": {"left": {"type": "COLUMN", "value": "d.account_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "a.account_id"}}}], "where_clause": {"logic": "AND", "conditions": [{"left": {"type": "COLUMN", "value": "d.type"}, "operator": "=", "right": {"type": "SEMANTIC", "value": "DISPONENT", "table": "disp", "column": "type"}}, {"left": {"type": "COLUMN", "value": "a.frequency"}, "operator": "=", "right": {"type": "SEMANTIC", "value": "POPLATEK PO OBRATU", "table": "account", "column": "frequency"}}]}, "target": [{"value": {"type": "COLUMN", "value": "c.client_id"}, "alias": "client_id"}], "group_by": [], "having_clause": null, "order_by": []}]}}, "compiler": {"status": "success", "generated_sql": "SELECT c.client_id AS client_id\nFROM \"client\" as c\nINNER JOIN \"disp\" as d ON (c.client_id = d.client_id)\nINNER JOIN \"account\" as a ON (d.account_id = a.account_id)\nWHERE ((d.type = 'DISPONENT') AND (a.frequency = 'POPLATEK PO OBRATU'))"}, "evaluator": {"status": "success", "match_type": "EXACT_MATCH", "details": null, "execution_status": "SUCCESS"}}, "metrics": {"total_time": 2.990382432937622, "total_tokens": 4097}}
{"query": "Among the accounts who have approved loan date in 1997, list out the accounts that have the lowest approved amount and choose weekly issuance statement.", "ground_truth_sql": "SELECT T2.account_id FROM loan AS T1 INNER JOIN account AS T2 ON T1.account_id = T2.account_id WHERE STRFTIME('%Y', T1.date) = '1997' AND T2.frequency = 'POPLATEK TYDNE' ORDER BY T1.amount LIMIT 1", "status": "completed", "steps": {"router": {"status": "success", "intent": "DATABASE QUERY", "confidence": 0.9953552484512329}, "decomposer": {"status": "success", "tokens": 4513, "json_plan": {"tasks": [{"task_id": 1, "is_achievable": true, "error": null, "limit_by": null, "main_table": "account as a", "is_distinct": false, "structural_logic": [{"type": "INNER JOIN", "table": "loan as l", "condition": {"left": {"type": "COLUMN", "value": "a.account_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "l.account_id"}}}], "where_clause": {"logic": "AND", "conditions": [{"left": {"type": "FUNCTION", "name": "strftime", "params": [{"type": "LITERAL", "value": "%Y"}, {"type": "COLUMN", "value": "l.date"}]}, "operator": "=", "right": {"type": "LITERAL", "value": "1997"}}, {"left": {"type": "COLUMN", "value": "a.frequency"}, "operator": "=", "right": {"type": "SEMANTIC", "value": "weekly issuance", "table": "account", "column": "frequency"}}, {"left": {"type": "COLUMN", "value": "l.amount"}, "operator": "=", "right": {"type": "SUBQUERY", "target_task_id": "2"}}]}, "target": [{"value": {"type": "COLUMN", "value": "a.account_id"}, "alias": "account_id"}, {"value": {"type": "COLUMN", "value": "l.amount"}, "alias": "approved_amount"}], "group_by": [], "having_clause": null, "order_by": []}, {"task_id": 2, "is_achievable": true, "error": null, "limit_by": null, "main_table": "loan as l2", "is_distinct": false, "structural_logic": [], "where_clause": {"logic": "AND", "conditions": [{"left": {"type": "FUNCTION", "name": "strftime", "params": [{"type": "LITERAL", "value": "%Y"}, {"type": "COLUMN", "value": "l2.date"}]}, "operator": "=", "right": {"type": "LITERAL", "value": "1997"}}]}, "target": [{"value": {"type": "FUNCTION", "name": "MIN", "params": [{"type": "COLUMN", "value": "l2.amount"}]}, "alias": "min_amount"}], "group_by": [], "having_clause": null, "order_by": []}]}}, "compiler": {"status": "success", "generated_sql": "SELECT a.account_id AS account_id, l.amount AS approved_amount\nFROM \"account\" as a\nINNER JOIN \"loan\" as l ON (a.account_id = l.account_id)\nWHERE ((STRFTIME('%Y', l.date) = '1997') AND (a.frequency = 'POPLATEK TYDNE') AND (l.amount IN (SELECT MIN(l2.amount) AS min_amount\nFROM \"loan\" as l2\nWHERE ((STRFTIME('%Y', l2.date) = '1997')))))"}, "evaluator": {"status": "success", "match_type": "WRONG", "details": "Row Count Mismatch: Expected 1, Got 0", "execution_status": "SUCCESS"}}, "metrics": {"total_time": 3.7549080848693848, "total_tokens": 4513}}
{"query": "Among the accounts who have loan validity more than 12 months, list out the accounts that have the highest approved amount and have account opening date in 1993.", "ground_truth_sql": "SELECT T1.account_id FROM loan AS T1 INNER JOIN account AS T2 ON T1.account_id = T2.account_id WHERE STRFTIME('%Y', T2.date) = '1993' AND T1.duration > 12 ORDER BY T1.amount DESC LIMIT 1", "status": "completed", "steps": {"router": {"status": "success", "intent": "DATABASE QUERY", "confidence": 0.9952924251556396}, "decomposer": {"status": "success", "tokens": 4270, "json_plan": {"tasks": [{"task_id": 1, "is_achievable": true, "error": null, "limit_by": null, "main_table": "loan as l", "is_distinct": false, "structural_logic": [{"type": "INNER JOIN", "table": "account as a", "condition": {"left": {"type": "COLUMN", "value": "l.account_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "a.account_id"}}}], "where_clause": {"logic": "AND", "conditions": [{"left": {"type": "COLUMN", "value": "l.duration"}, "operator": ">", "right": {"type": "LITERAL", "value": 12}}, {"left": {"type": "COLUMN", "value": "a.date"}, "operator": ">=", "right": {"type": "LITERAL", "value": "1993-01-01"}}, {"left": {"type": "COLUMN", "value": "a.date"}, "operator": "<", "right": {"type": "LITERAL", "value": "1994-01-01"}}]}, "target": [{"value": {"type": "FUNCTION", "name": "MAX", "params": [{"type": "COLUMN", "value": "l.amount"}]}, "alias": "max_amount"}], "group_by": [], "having_clause": null, "order_by": []}, {"task_id": 2, "is_achievable": true, "error": null, "limit_by": null, "main_table": "loan as l", "is_distinct": false, "structural_logic": [{"type": "INNER JOIN", "table": "account as a", "condition": {"left": {"type": "COLUMN", "value": "l.account_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "a.account_id"}}}], "where_clause": {"logic": "AND", "conditions": [{"left": {"type": "COLUMN", "value": "l.duration"}, "operator": ">", "right": {"type": "LITERAL", "value": 12}}, {"left": {"type": "COLUMN", "value": "a.date"}, "operator": ">=", "right": {"type": "LITERAL", "value": "1993-01-01"}}, {"left": {"type": "COLUMN", "value": "a.date"}, "operator": "<", "right": {"type": "LITERAL", "value": "1994-01-01"}}, {"left": {"type": "COLUMN", "value": "l.amount"}, "operator": "=", "right": {"type": "SUBQUERY", "target_task_id": "1"}}]}, "target": [{"value": {"type": "COLUMN", "value": "a.account_id"}, "alias": "account_id"}, {"value": {"type": "COLUMN", "value": "l.amount"}, "alias": "approved_amount"}], "group_by": [], "having_clause": null, "order_by": []}]}}, "compiler": {"status": "success", "generated_sql": "SELECT a.account_id AS account_id, l.amount AS approved_amount\nFROM \"loan\" as l\nINNER JOIN \"account\" as a ON (l.account_id = a.account_id)\nWHERE ((l.duration > 12) AND (a.date >= '1993-01-01') AND (a.date < '1994-01-01') AND (l.amount = (SELECT MAX(l.amount) AS max_amount\nFROM \"loan\" as l\nINNER JOIN \"account\" as a ON (l.account_id = a.account_id)\nWHERE ((l.duration > 12) AND (a.date >= '1993-01-01') AND (a.date < '1994-01-01')))))"}, "evaluator": {"status": "success", "match_type": "SUPER_SOFT_MATCH", "details": "Logic Correct (Smart Map): Extra Columns", "execution_status": "SUCCESS"}}, "metrics": {"total_time": 3.060081958770752, "total_tokens": 4270}}
{"query": "Among the account opened, how many female customers who were born before 1950 and stayed in Sokolov?", "ground_truth_sql": "SELECT COUNT(T2.client_id) FROM district AS T1 INNER JOIN client AS T2 ON T1.district_id = T2.district_id WHERE T2.gender = 'F' AND STRFTIME('%Y', T2.birth_date) < '1950' AND T1.A2 = 'Sokolov'", "status": "completed", "steps": {"router": {"status": "success", "intent": "DATABASE QUERY", "confidence": 0.9952087998390198}, "decomposer": {"status": "success", "tokens": 4126, "json_plan": {"tasks": [{"task_id": 1, "is_achievable": true, "error": null, "limit_by": null, "main_table": "account as a", "is_distinct": false, "structural_logic": [{"type": "INNER JOIN", "table": "disp as d", "condition": {"left": {"type": "COLUMN", "value": "a.account_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "d.account_id"}}}, {"type": "INNER JOIN", "table": "client as c", "condition": {"left": {"type": "COLUMN", "value": "d.client_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "c.client_id"}}}, {"type": "INNER JOIN", "table": "district as dist", "condition": {"left": {"type": "COLUMN", "value": "c.district_id"}, "operator": "=", "right": {"type": "COLUMN", "value": "dist.district_id"}}}], "where_clause": {"logic": "AND", "conditions": [{"left": {"type": "COLUMN", "value": "c.gender"}, "operator": "=", "right": {"type": "SEMANTIC", "value": "female", "table": "client", "column": "gender"}}, {"left": {"type": "COLUMN", "value": "c.birth_date"}, "operator": "<", "right": {"type": "LITERAL", "value": "1950-01-01"}}, {"left": {"type": "COLUMN", "value": "dist.A2"}, "operator": "=", "right": {"type": "SEMANTIC", "value": "Sokolov", "table": "district", "column": "A2"}}, {"left": {"type": "COLUMN", "value": "d.type"}, "operator": "=", "right": {"type": "SEMANTIC", "value": "owner", "table": "disp", "column": "type"}}]}, "target": [{"value": {"type": "FUNCTION", "name": "COUNT", "params": [{"type": "COLUMN", "value": "a.account_id"}]}, "alias": "female_accounts_count"}], "group_by": [], "having_clause": null, "order_by": []}]}}, "compiler": {"status": "success", "generated_sql": "SELECT COUNT(a.account_id) AS female_accounts_count\nFROM \"account\" as a\nINNER JOIN \"disp\" as d ON (a.account_id = d.account_id)\nINNER JOIN \"client\" as c ON (d.client_id = c.client_id)\nINNER JOIN \"district\" as dist ON (c.district_id = dist.district_id)\nWHERE ((c.gender = 'F') AND (c.birth_date < '1950-01-01') AND (dist.A2 = 'Sokolov') AND (d.type = 'OWNER'))"}, "evaluator": {"status": "success", "match_type": "WRONG", "details": "Row ['8'] (as set) not found in prediction rows (subset check).", "execution_status": "SUCCESS"}}, "metrics": {"total_time": 5.45611310005188, "total_tokens": 4126}}
{"query": "List out the accounts who have the earliest trading date in 1995 ?", "ground_truth_sql": "SELECT account_id FROM trans WHERE STRFTIME('%Y', date) = '1995' ORDER BY date ASC LIMIT 1", "status": "completed", "steps": {"router": {"status": "success", "intent": "DATABASE QUERY", "confidence": 0.9958898425102234}, "decomposer": {"status": "success", "tokens": 3836, "json_plan": {"tasks": [{"task_id": 2, "is_achievable": true, "error": null, "limit_by": null, "main_table": "trans as t2", "use_distinct": false, "structural_logic": [], "where_clause": {"logic": "AND", "conditions": [{"left": {"type": "COLUMN", "value": "t2.date"}, "operator": ">=", "right": {"type": "LITERAL", "value": "1995-01-01"}}, {"left": {"type": "COLUMN", "value": "t2.date"}, "operator": "<=", "right": {"type": "LITERAL", "value": "1995-12-31"}}]}, "target": [{"value": {"type": "FUNCTION", "name": "MIN", "params": [{"type": "COLUMN", "value": "t2.date"}]}, "alias": "min_date"}], "group_by": [], "having_clause": null, "order_by": []}, {"task_id": 1, "is_achievable": true, "error": null, "limit_by": null, "main_table": "trans as t", "use_distinct": true, "structural_logic": [], "where_clause": {"left": {"type": "COLUMN", "value": "t.date"}, "operator": "=", "right": {"type": "SUBQUERY", "target_task_id": "2"}}, "target": [{"value": {"type": "COLUMN", "value": "t.account_id"}, "alias": "account_id"}, {"value": {"type": "COLUMN", "value": "t.date"}, "alias": "date"}], "group_by": [], "having_clause": null, "order_by": []}]}}, "compiler": {"status": "success", "generated_sql": "SELECT t.account_id AS account_id, t.date AS date\nFROM \"trans\" as t\nWHERE (t.date = (SELECT MIN(t2.date) AS min_date\nFROM \"trans\" as t2\nWHERE ((t2.date >= '1995-01-01') AND (t2.date <= '1995-12-31'))))"}, "evaluator": {"status": "success", "match_type": "SUPER_SOFT_MATCH", "details": "Logic Correct (Smart Map): Extra Rows, Extra Columns", "execution_status": "SUCCESS"}}, "metrics": {"total_time": 3.4880659580230713, "total_tokens": 3836}}
